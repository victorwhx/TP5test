var TINGYUN=function(t,e,n){function r(t){var e=!!t&&"length"in t&&t.length,n=typeof t;return"function"!==n&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function i(t,e){var n,i=0;if(t)if(r(t))for(n=t.length;i<n&&!1!==e.call(t[i],t[i],i);i++);else for(i in t)if(!1===e.call(t[i],t[i],i))break;return t}function o(t){return function(e){return"Array"===t&&Array.isArray?Array.isArray(e):Object.prototype.toString.call(e)==="[object "+t+"]"}}function a(t){switch(typeof t){case"object":if(!t)return null;if(t instanceof Array)return i(t,function(e,n){t[n]=a(e)}),"["+t.join(",")+"]";if(t instanceof Date)return t.getTime().toString();var e="";return i(t,function(t,n){Rt(t)||(e+=a(n)+":"+a(t)+",")}),e&&(e=e.substr(0,e.length-1)),"{"+e+"}";case"string":return Ot+t.replace(At,"\\$1").replace(Lt,"\\n")+Ot;case"number":return isNaN(t)?null:t;case"boolean":return t;case"function":return a(t.toString());case"undefined":default:return'"undefined"'}}function u(t){return t&&Ct(t)?Tt(t):t}function s(t,e,n,r){var i=function(){return Mt(t,e,i),n.apply(this,arguments)};return Bt(t,e,i,r)}function c(t,e){return Function.prototype.apply.apply(t,e)}function f(t,e){return function(){t.apply(e,arguments)}}function l(t){return jt?jt(t):t}function d(t){return arguments.length<2||!t?t:(i(Dt.call(arguments,1),function(e){i(e,function(e,n){t[n]=e})}),t)}function h(t,e){for(var n=-1,r=0,i=null==t?0:t.length,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}function v(t,e){return t?e?t.replace(/\{(\w+.?\w+)\}/g,function(t,n){return e[n]||""}).replace(/\{(\d+)\}/g,function(t,n){return e[n]||""}):t:""}function p(t){return setTimeout(t,0)}function g(){}function m(){return+new Date}function y(t){return function(){if(null!==t){var e=t;t=null,e.apply(this,arguments)}}}function b(t){return t?Ct(t)?t.length:e.ArrayBuffer&&t instanceof ArrayBuffer?t.byteLength:e.Blob&&t instanceof Blob?t.size:t.length?t.length:0:0}function S(t){return Pt!==Ft&&/^https/i.test(t&&t.protocol||Pt)?"https:":Ft}function x(t,e,n,r){var o=null;return t&&e&&(o=S(r)+"//"+t+e,n&&(o+="?",i(n,function(t,e){var n=[l(e),"=",l(t),"&"];o+=n.join("")}),o+="__r="+m())),o}function _(){this.events={}}function w(t){return!(t in Jt)||Jt[t]}function E(t){var e=Xt.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?e[3]:null}function T(t,e,n){var r=t+"="+e;if(n){var i=new Date;i.setTime(i.getTime()+1e3*n),r+=";expires="+i.toGMTString()}Xt.cookie=r}function k(t,e,n){var r=Xt.createElement(t);try{for(var i in e)r[i]=e[i]}catch(a){var o="<"+t;for(var i in e)o+=" "+i+'="'+e[i]+'"';o+=">",n||(o+="</"+t+">"),r=Xt.createElement(o)}return r}function C(t,e,n,r){Rt(n)&&(r=n);var i=k("div",{style:me}),o=k("iframe",{name:"ty_form",width:0,height:0,style:me}),a=k("form",{style:me,action:t,enctype:"application/x-www-form-urlencoded",method:"post",target:"ty_form"}),u=k("input",{name:"data",type:"hidden"},!0);u.value=kt(e),a.appendChild(u),i.appendChild(o),i.appendChild(a),Xt.body.appendChild(i),a.submit(),o.onreadystatechange=function(){o.readyState!==le&&4!==o.readyState||(r(null,o.innerHTML),Xt.body.removeChild(i))}}function I(t,e,n){if(t&&n&&Rt(n)){var r=t[e];if(!r||!r._wrapped){var i=n(r);return i&&(i._wrapped=!0),t[e]=i,i}}}function R(t){be&&t()}function N(t){return function(){be&&t.apply(this,arguments)}}function q(){be=!1}function O(){we.on(ae,y(function(){t();var e=m();R(function(){Se.load=e}),Ce.loadEventEnd=e})),i([ae,ue,se,ce],function(t){Bt(e,t,function(e){R(function(){(Se.e[t]||(Se.e[t]=[])).push(m())}),we.emit(t,e)})});var t=y(function(){var t=m();R(function(){Se.end=t}),Ce.domContentLoadedEventStart=t,Xt.querySelectorAll&&(_e.resources=_e.resources||[],i(Xt.querySelectorAll("head>link,head>script"),function(t){var e;"LINK"==t.tagName?e=t.href:"SCRIPT"!=t.tagName||t.defer||t.async||(e=t.src),e&&_e.resources.push(e)}))});Bt(Xt,"DOMContentLoaded",t),Bt(Xt,fe,function(e){Xt.readyState===le&&t()});var n=y(function(){Ce.touch=m()});i(["scroll","click","keypress"],function(t){s(Xt,t,n)});var r=e.requestAnimationFrame;!r||r.toString().indexOf("[native code]")<0||I(e,"requestAnimationFrame",function(t){return function(){if(!Ce.firstPaint){var n=m();R(function(){Se.an.count++,Se.an.t=n}),Ce.firstPaint=n,e.requestAnimationFrame=t}return t.apply(this,arguments)}})}function A(t){H(t,Ee)}function L(t){H(t,Te)}function H(t,e){var n="ok";if(!t)return n=e.length?e.join("\n"):n;e.push(t)}function B(){var t=this;t.xhrs={},t.errs=[],_.call(t)}function M(t,e){this.flags=0,Rt(t.create)&&(this.create=t.create,this.flags|=Ae),Rt(t.before)&&(this.before=t.before,this.flags|=Le),Rt(t.after)&&(this.after=t.after,this.flags|=He),Rt(t.error)&&(this.error=t.error,this.flags|=Be),this.data=e}function j(t,e){if(!je){if(!Nt(t)||!t)throw new TypeError("callbacks arguments must be an object");return je=new M(t,e)}}function D(t){var e=je.data;if(0!=(je.flags&Ae)){var n=je.create(je.data);void 0!==n&&(e=n)}return function n(){0!=(je.flags&Le)&&je.before(this,e);var r=n;r._&&(r._=1);try{var i=t.apply(this,arguments)}catch(t){throw 0!=(je.flags&Be)&&je.error(e,t),t}return 0!=(je.flags&He)&&je.after(this,e),i}}function z(t){return!je||je.flags<=0?t:D(t)}function P(){function t(t){return function(e){var n=Dt.call(arguments,0);Rt(e)&&(n[0]=z(e));var r=this;try{return t.apply(r,n)}catch(t){}return c(t,[r,n])}}I(e,"setTimeout",t),I(e,"setInterval",t)}function F(){this.id=null,this.active=null,this._set=[]}function U(){P();var t=new F;return t.id=j({create:function(){return t.active},before:function(e,n){n&&t.enter(n)},after:function(e,n){n&&t.exit(n)},error:function(e,n){if(e){try{n.moduleId=e.moduleId}catch(t){}t.exit(e)}}}),t}function Y(t){Oe&&console.warn(t||"Event key required!")}function X(t){t=t||{},this.key=t.key;var e=t.timeout||6e5;this.i=e?setTimeout(f(this.fail,this),e):null,this.status=1,this.remain=0,this.xhrs=[],this.s=m(),this.e=null,this.called=this.sent=!1}function G(t){try{return u(t)}catch(t){A(t&&t.message)}return null}function W(){return Ce[Ze]||Ce._end}function J(){return Ce.loadEventEnd||Ce._end}function $(t){function r(e){return t[e]>0?t[e]-a:0}var o={},a=n;if(t){R(function(){var e=Se.t={};i(t,function(t,n){Rt(t)||(e[n]=t)})}),a=t.navigationStart,o={f:r($e),qs:r(Ke),rs:r(Ve),re:r(Qe),os:r(Ze),oe:r(tn),oi:r(en),oc:r(nn),ls:r(rn),le:r(on),tus:r(an),tue:r(un)};var u=r(sn),s=r(cn),c=r(fn),f=r(ln),l=r(dn),d=r(hn);if(d-l>0&&(o.cs=l,o.ce=d),s-u>0&&(o.ds=u,o.de=s),(f-c>0||f>0)&&(o.es=c,o.ee=f),0==o.le){var h=J();o.ue=h-a}Ce._le=o.ue||o.le;var v,p;if(t.msFirstPaint)v=t.msFirstPaint,R(function(){Se.fp="m_"+v});else if((p=e.chrome)&&p.loadTimes){var g=p.loadTimes();g&&g.firstPaintTime&&(v=1e3*g.firstPaintTime),R(function(){Se.fp="c_"+g.firstPaintTime})}else Ce.firstPaint&&(v=Ce.firstPaint,R(function(){Se.fp=v}));v&&(o.fp=Math.round(v-a),Ce.fp=o.fp),t[vn]&&(o.sl=r(vn))}else o={t:a,os:W()-a,ls:J()-a};return o.je=Ce.errs&&Ce.errs.length||0,Ce.ct&&(o.ct=Ce.ct-a),Ce.touch&&(o.fi=Ce.touch-a),o}function K(t,e){var r={tr:!1,tt:l(Xt.title),charset:Xt.characterSet};xe.resources&&d(r,xe.resources),R(function(){r.debug=Se}),q();var o=Ce.errs;i(o,function(t,r){var i=t.toObject();i.o=i.o-e&&e.navigationStart||n,o[r]=i}),r.err=o;var a="getEntriesByType";return t[a]?(r.tr=!0,r.res=[],i(t[a]("resource"),function(t){function e(e){var n=t[e];return n>0?n:0}var n=t.initiatorType,i=t.name,o={o:e("startTime"),rt:n,n:i,f:e($e),ds:e(sn),de:e(cn),cs:e(dn),ce:e(hn),sl:e(vn),qs:e(Ke),rs:e(Ve),re:e(Qe),ts:t.transferSize||0,es:t.encodedBodySize||0};if("xmlhttprequest"===n){var a=V(i);a&&(o.aid=a.id,o.atd=a.trId,o.an=a.action,o.aq=a.time&&a.time.qu,o.as=a.time&&a.time.duration)}r.res.push(o)})):L(v(Ne,[a])),r}function V(t){var e;return i(Ce.xhrs,function(n,r){if(r&&r.indexOf(t)>-1)return e=n,!1}),e}function Q(t){var e={};return t&&(e.id=t.id,e.a=t.a,e.q=t.q,e.tid=t.tid,e.n=t.n),e}function Z(t){var e=0,n=t.timing;return n?t.getEntriesByName&&(e=n.domLoading,i(_e.resources,function(r){var i=t.getEntriesByName(r);if(1==i.length){var o=i[0].responseEnd+n.navigationStart;o>e&&(e=o)}}),e-=n.navigationStart):L("fp=0"),R(function(){Se._fp=e}),Math.round(e)}function tt(t,n,r,o){var a=r||0,u=xe.firstScreenResources;if(u&&u.length&&t.getEntriesByName)return i(u,function(e){var n=t.getEntriesByName(e);if(n.length){var r=n[0].responseEnd;r>a&&(a=r)}}),o.fs_s=1,Math.round(a);if(!Xt.createElement("img").getBoundingClientRect)return R(function(){Se.fs=a}),a;if(t.getEntriesByName){var s=e.innerHeight,c=e.innerWidth,f=[];i(Xt.querySelectorAll("img"),function(t){t.src&&et(nt(t),s,c)&&!rt(t)&&f.push(t.src)});var l=(n.loadEventEnd||Ce.loadEventEnd)-n.navigationStart;i(f,function(e){var n=t.getEntriesByName(e);if(n.length){var r=n[0],i=r.responseEnd;r.fetchStart<=l&&i>a&&(a=i)}})}return Math.round(a)}function et(t,n,r){if(t){var i=e.pageYOffset;if(t.top+(0===i?0:i||Xt.scrollTop||0)-(Xt.clientTop||0)>=n)return!1;var o=t.left;return o>=0&&o<r}return!1}function nt(t){return Rt(t.getBoundingClientRect)?t.getBoundingClientRect():void 0}function rt(t){return ee.reliableHiddenOffsets()?t.offsetWidth<=0&&t.offsetHeight<=0&&!t.getClientRects().length:it(t)}function it(t){for(;t&&1===t.nodeType;){if("none"===ot(t)||"hidden"===t.type)return!0;t=t.parentNode}return!1}function ot(t){return t.style&&t.style.display}function at(t){var e=n,r=0;return t&&(e=t.navigationStart||e,r=t[Ze]||t.domInteractive||t.domLoading||r),(r=Ce[Ze]||r||Ce._end)-e}function ut(t){if(t){var e=t.fetchStart;if(e)return e-t.navigationStart}}function st(t){return function e(n,r){var i=this,o=e;if(o._&&(o._=1),!i[ge]){var a=i[ve]={};a.method=n,a.url=r,a.id=Sn++;var u=ze.get("event");u&&(a.key=u.key,u.remain++)}try{return t.apply(i,arguments)}catch(t){}return c(t,[i,arguments])}}function ct(t){return function e(n){var r=this,i=e;if(i._&&(i._=1),!r[ge]){var o=r[ve];o&&(o.start=m(),o.reqSize=b(n)),ft(r),r.setRequestHeader&&Jt.id&&o&&wn(o.url)&&(o.r=m()%1e9,r.setRequestHeader("X-Tingyun-Id",Jt.id+";r="+o.r))}try{return t.apply(r,arguments)}catch(t){}return c(t,[r,arguments])}}function ft(t){function e(e){return z(function n(){var r=n;r._&&(r._=1),lt(t);var i;if(Rt(e)){var o=t[ve];if(o&&4==t.readyState)var a=m();i=e.apply(this,arguments),o&&4==t.readyState&&(o.cbTime=m()-a,t[ve]=null)}return i})}function n(e){t[ve]&&(t[ve].errorCode=e)}if(t[_n])I(t,_n,e);else try{Bt(t,fe,z(function e(){var n=e;n._&&(n._=1),lt(t)})),i(xn,function(e,r){Bt(t,r,function(){n(e)})})}catch(r){return void p(function(){i(xn,function(e,r){var i="on"+r;t[i]?I(t,i,function(t){if(n(e),Rt(t))return t.apply(this,arguments)}):t[i]=function(){n(e)}}),I(t,_n,e)})}p(function(){I(t,_n,e)})}function lt(t){var e=t[ve];if(e&&(e.end=m(),e.readyState=t.readyState,4==t.readyState)){e.status=t.status,e.resSize=dt(t);var n=ze.get("event");p(function(){var r=!1;if(i(bn,function(t){if(t.id===e.id)return r=!0,!1}),!r){var o=ht(e,t);n&&n.key==e.key&&(n.xhrs.push(o),0==--n.remain&&n._end()),Ce.xhrs&&(yn(e),Ce.xhrs[e.url]=o),bn.push(o)}})}}function dt(t){var e=0;if(""==t.responseType||"text"==t.responseType)e=b(t.responseText);else if(t.response)e=b(t.response);else try{e=b(t.responseText)}catch(t){}return e}function ht(t,e){if(t){var n=t.status,r={id:t.id,req:t.method+" "+t.url,start:t.start,du:n>0?t.end-t.start:0,cb:t.cbTime||0,status:n,err:t.errorCode?t.errorCode:0,rec:t.resSize,send:t.reqSize};if(t.r){var i=pt(e,t);i&&(r.s_id=i.id,r.s_name=i.action,i.time&&(r.s_du=i.time.duration,r.s_qu=i.time.qu),r.t_id=i.trId)}return r}}function vt(t,e){if(t&&t.getResponseHeader)return t.getResponseHeader(e)}function pt(t,e){var n=G(vt(t,"X-Tingyun-Tx-Data"));return n&&n.r&&gt(n.r)===gt(e.r)?n:null}function gt(t){return t+""}function mt(){return setInterval(function(){if(bn&&bn.length){var t=[];i(bn,function(e){t.push(e)});var n=null;xe.ulabel&&(n={ulabel:xe.ulabel}),Ce.emit("send","/xhr1",n,{xhr:t},function(){bn=h(bn,function(e){return t.indexOf(e)<0})}),zt()&&!e.XDomainRequest&&(bn=[])}},gn)}function yt(t){this.limit=t,this.reset()}function bt(t,e,n,r){return String(t)+String(e)+String(n)+String(r)}function St(t,e,n,r,i,o,a){var u=this;u.id=t,u.time=m(),u.msg=e,u.lineno=r,u.colno=i,u.filename=n,u.count=1,u.stack=o&&o.stack||"",u.module=a,u.fix();var s=Cn[t];u.ep=s?0:1,Cn[t]=!0}function xt(t){var e=function(t){var e=[];return i(t,function(t){e.push(t.toObject())}),e}(kn.c);if(!e||!e.length)return null;var r={fu:Tn||Tn++,os:parseInt((m()-(_e.pfStart||n))/1e3)};xe.ulabel&&(r.ulabel=xe.ulabel),Ce.emit("send","/err1",r,{datas:e},f(kn.reset,kn))}function _t(t,e,n,r,o){if(e||!$t){var a=!1;if(i(Wt.domains,function(t){if(a=t.test(e))return!1}),!a){var u=o&&o.moduleId,s=bt(t,n,r,u),c=kn.get(s);c?c.increase():(c=new St(s,t,e,n,r,o,u),kn.add(s,c),Ce.errs&&Ce.errs.push(c))}}}function wt(){var t=e.onerror;e.onerror=function(e,n,r,i,o){if(_t(e,n,r,i,o),Rt(t))return t.apply(this,arguments)},e.onerror._ty=!0}function Et(){var t=e.onerror;t&&t._ty||wt()}var Tt,kt,Ct=o("String"),It=o("Array"),Rt=o("Function"),Nt=o("Object"),qt=o("Undefined"),Ot='"',At=/([\"\\])/g,Lt=/\n/g,Ht=e.JSON;Ht&&Ht.parse&&Ht.stringify?(Tt=function(t){return JSON.parse(t)},kt=function(t){return JSON.stringify(t)}):(Tt=function(t){return new Function("return "+t)()},kt=a);var Bt,Mt;e.addEventListener?(Bt=function(t,e,n,r){return t.addEventListener(e,n,r)},Mt=function(t,e,n){return t.removeEventListener(e,n)}):(Bt=function(t,e,n){return t.attachEvent("on"+e,n)},Mt=function(t,e,n){return t.detachEvent("on"+e,n)});var jt=e.encodeURIComponent,Dt=[].slice,zt=new Function("return!+[1,]"),Pt=e.location.protocol,Ft="http:",Ut=function(){function t(t){return t<0?NaN:t<=30?0|Math.random()*(1<<t):t<=53?(0|Math.random()*(1<<30))+(0|Math.random()*(1<<t-30))*(1<<30):NaN}function e(t,e){for(var n=t.toString(16),r=e-n.length,i="0";r>0;r>>>=1,i+=i)1&r&&(n=i+n);return n}return function(){return e(t(32),8)+"-"+e(t(16),4)+"-"+e(16384|t(12),4)+"-"+e(32768|t(14),4)+"-"+e(t(48),12)}}();_.prototype={on:function(t,e){var n=this;return Ct(t)?(n.events[t]||(n.events[t]=[])).push(e):It(t)&&i(t,function(t){n.on(t,e)}),n},off:function(t,e){var n=arguments.length,r=this;if(0===n)return r.events={},r;var i=r.events[t];if(!i)return r;if(1===n)return r.events[t]=null,r;for(var o=i.length;o--;)if(i[o]===e){i.splice(o,1);break}return r},emit:function(t){var e=[].slice.call(arguments,1),n=this.events[t];return n&&i(n,function(t){return t.apply(this,e)}),this},unshift:function(t,e){var n=this;return(n.events[t]||(n.events[t]=[])).unshift(e),n}};var Yt=e.Error,Xt=e.document,Gt=e.XMLHttpRequest,Wt={};!function(t){t.server={id:"gVpxXPG41PA",ignore_err:!0,beacon:"beacon.tingyun.com",beacon_err:"beacon-err.tingyun.com",key:"bj2k_lD_ucY",trace_threshold:7e3,fp_threshold:2e3,fs_threshold:4e3,dr_threshold:4e3,custom_urls:[],sr:1}}(Wt);var Jt=Wt.server||{};Jt=d({fp_threshold:2e3,fs_threshold:4e3,dr_threshold:4e3},Jt);var $t=w("ignore_err"),Kt=w("debug"),Vt=e.location,Qt=e.navigator,Zt=e.HTMLElement,te=function(){try{var t=Ut();return e.localStorage.setItem(t,t),e.localStorage.removeItem(t),!0}catch(t){return!1}}(),ee={};ee.localStorage=te,function(){function t(){var t,f,l=Xt.documentElement;l.appendChild(s),c.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",n=i=u=!1,r=a=!0,e.getComputedStyle&&(f=e.getComputedStyle(c),n="1%"!==(f||{}).top,u="2px"===(f||{}).marginLeft,i="4px"===(f||{width:"4px"}).width,c.style.marginRight="50%",r="4px"===(f||{marginRight:"4px"}).marginRight,(t=c.appendChild(Xt.createElement("div"))).style.cssText=c.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",c.style.width="1px",a=!parseFloat((e.getComputedStyle(t)||{}).marginRight),c.removeChild(t)),c.style.display="none",(o=0===c.getClientRects().length)&&(c.style.display="",c.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(t=c.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(o=0===t[0].offsetHeight)&&(t[0].style.display="",t[1].style.display="none",o=0===t[0].offsetHeight)),l.removeChild(s)}Xt.documentElement;var n,r,i,o,a,u,s=Xt.createElement("div"),c=Xt.createElement("div");c.style&&(c.style.cssText="float:left;opacity:.5",ee.opacity="0.5"===c.style.opacity,ee.cssFloat=!!c.style.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",ee.clearCloneStyle="content-box"===c.style.backgroundClip,(s=Xt.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",c.innerHTML="",s.appendChild(c),ee.boxSizing=""===c.style.boxSizing||""===c.style.MozBoxSizing||""===c.style.WebkitBoxSizing,ee.reliableHiddenOffsets=function(){return null==n&&t(),o})}();var ne,re;ee.localStorage?(ne=function(t){return e.localStorage.getItem(t)},re=function(t,n){return e.localStorage.setItem(t,n),n}):(ne=E,re=T);var ie,oe="error",ae="load",ue="unload",se="beforeunload",ce="pagehide",fe="readystatechange",le="complete",de="TY_DISTINCT_ID",he="TY_SESSION_ID",ve="_ty_rum",pe="TINGYUN",ge="__ign",me="display:none",ye=function(t,e){e=e||g;var n=new Image;Bt(n,fe,function(){"loaded"!=n.readyState&&4!=n.readyState||e(null)},!1),Bt(n,ae,function(){e(null)},!1),Bt(n,oe,function(){e(oe)},!1),n.src=t};e.XDomainRequest?ie=function(t,e,n,r){Rt(n)&&(r=n);var i=new XDomainRequest;i.open("POST",t),i.onload=function(){r(null,i.responseText)},i.onerror=function(t){r(t)},i.send(kt(e))}:zt()?ie=C:Qt.sendBeacon?ye=ie=function(t,e,n,r){Rt(n)&&(r=n,n=null),Qt.sendBeacon(t,kt(e))&&r&&r()}:ie=function(t,e,n,r){Rt(n)&&(r=n,n=null);var i=y(r),o=new Gt;o[ge]=!0,o.overrideMimeType&&o.overrideMimeType("text/html"),o.onreadystatechange=function(){4==o.readyState&&200==o.status&&i(null,o.responseText)},o.onerror=i,e=kt(e);try{o.open("POST",t,!0)}catch(n){return C(t,e,i)}for(var a in n)o.setRequestHeader(a,n[a]);o.send(e)};var be=Kt,Se={start:n,e:{},an:{count:0},visible:[]},xe={},_e={};!function(){if(Kt){var t,e,n="visibilitychange";qt(Xt.hidden)?qt(Xt.msHidden)?qt(Xt.webkitHidden)||(t="webkitHidden",e="webkit"+n):(t="msHidden",e="ms"+n):(t="hidden",e=n),qt(Xt.addEventListener)||qt(Xt[t])||Bt(Xt,e,N(function(){Se.visible.push([Xt[t],m()])}))}}();var we=new _,Ee=[],Te=[],ke=B.prototype;ke.start=function(){if(!Jt.key)return A("missing config, agent disabled!"),!1;var t=e[ve]||e[pe];return t&&t.server?(A("already loaded!"),!1):(O(),this)},d(ke,_.prototype);var Ce=new B;Ce.on("send",function(t,e,n,r){var i=x(Jt.beacon,t,d({},Ie,e||{}));switch(r=r||g,t){case"/pf":n?ie(i,n,function(){Ce.xhrs=Ce.errs=null,r()}):ye(i,r);break;default:ie(i,n,r)}});var Ie={pvid:Ut(),ref:Xt.URL,referrer:Xt.referrer,key:Jt.key,v:"1.7.5",av:"1.7.5",did:function(){return ne(de)||re(de,Ut(),86400)}(),sid:function(){var t=E(he);return t||(t=Ut(),T(he,t)),t}()},Re=Zt?function(t){return t instanceof Zt}:function(t){t&&"object"==typeof t&&1===t.nodeType&&Ct(t.nodeName)},Ne="{0} not support",qe={},Oe=void 0!==e.console,Ae=1,Le=2,He=4,Be=8,Me=M.prototype;Me.create=Me.before=Me.after=Me.error=null;var je;F.prototype={createContext:function(){return Object.create?Object.create(this.active):U(this.active)},get:function(t){if(this.active)return this.active[t]},set:function(t,e){if(this.active)return this.active[t]=e},enter:function(t){if(!t)throw new Yt("context required!");this._set.push(this.active),this.active=t},exit:function(t){if(!t)throw new Yt("context required!");if(t!==this.active){var e=this._set.lastIndexOf(t);if(e<0)throw new Yt("context not currently entered!");this._set.splice(e,1)}else this.active=this._set.pop()},bind:function(t,e){e||(e=this.active?this.active:this.createContext());var n=this;return function(){n.enter(e);try{return t.apply(this,arguments)}catch(t){try{t.moduleId=e.moduleId}catch(t){}throw t}finally{n.exit(e)}}}};var De=!1,ze=(De||(ze=U(),De=!0),ze),Pe=Y.prototype;Pe.fail=Pe.end=g;var Fe=X.prototype;Fe.end=Fe.finish=Fe.fail=null,Fe.send=function(t){var e=this;e.sent=!0;var n=t.event&&t.event.xhrs||[];i(n,function(t){t.start=t.start-e.s});var r={key:e.key,duration:e.e-e.s,status:e.status,xhrs:n};Ce.emit("send","/spe",null,r,g)};var Ue={},Ye={},Xe=e.screen;Xe&&(Ye.sh=Xe.height,Ye.sw=Xe.width);var Ge={host:"cshst",url:"csurl"},We={version:"1.7.5",config:function(t,e){var n;if(Nt(t))n=t;else{if(!Ct(t)||void 0===e)throw new Yt("illegal argument");(n={})[t]=e}return i(n,function(t,e){e in Ge?xe[Ge[e]]=t:xe[e]=t}),this},DIAGNOSE_HREF:2,diagnose:function(t){function e(t,e,r){var i=r||"log",o=n[t]||(n[t]={});o[i]=o[i]||"",o[i]+=e}var n={},r=A();if(e("Status",r,"ok"!==r),e("Debug",L()),i(qe,function(t,n){e("Timeline",n+": "+t.toString())}),!t&&Oe)console.log("[TingYun Agent Diagnosis]\n"),i(n,function(t,e){i(console[e],function(t,e){console[e](t)})});else{if(2!==t)return kt(n);Vt.href=Vt.href+"#"+kt(n)}},createEvent:function(t){var e=(t=t||{}).key;if(!e)return new Y;if(Ue[e])return new Y("event "+e+" is executing");Ue[e]=!0;var n=ze.createContext();ze.enter(n);var r=new X(t);return ze.set("event",r),r._end=function(){var t=this;!t.sent&&0===t.remain&&t.called&&t.finish().send(n)},r.end=function(t){var e=this;e.called?Oe&&console.warn("Event "+this.key+"has ended or failed!"):(e.called=!0,ze.exit(n),e.status=arguments.length?t:1,e._end())},r.finish=function(t){var e=this;return e.e=m(),e.i&&clearTimeout(e.i),delete Ue[e.key],e},r.fail=function(){this.end(0)},r},logFirstScreen:function(t){if(t){var e=xe.firstScreenResources=xe.firstScreenResources||[];It(t)||(t=[t]),i(t,function(t){if(Ct(t))e.push(t);else if(Re(t)){var n=t.src||t.href;n&&e.push(n)}})}},addExcludedDomain:function(t){It(t)||(t=[t]),i(t,function(t){if(t){if(!(t instanceof RegExp))throw new Yt("parameter's type requires RegExp");(Wt.domains||(Wt.domains=[])).push(t)}})}};e[ve]=e[pe]=We;var Je=0,$e="fetchStart",Ke="requestStart",Ve="responseStart",Qe="responseEnd",Ze="domContentLoadedEventStart",tn="domContentLoadedEventEnd",en="domInteractive",nn="domComplete",rn="loadEventStart",on="loadEventEnd",an="unloadEventStart",un="unloadEventEnd",sn="domainLookupStart",cn="domainLookupEnd",fn="redirectStart",ln="redirectEnd",dn="connectStart",hn="connectEnd",vn="secureConnectionStart",pn=function(t){if(!t.agent){var n=e._ty_rum;if(n&&n.agent)t.agent=n.agent;else{var r=E("TINGYUN_DATA");if(r){try{t.agent=G(decodeURIComponent(r))}catch(t){A(t&&t.message)}T("TINGYUN_DATA","",-1e3)}}}return t.agent}(Wt);pn&&pn.ulabel&&(xe.ulabel=pn.ulabel);var gn=2e3,mn=function(t){var e=[];return i(Jt.custom_urls,function(t){try{e.push(new RegExp(t))}catch(t){A(t&&t.message)}}),e}(),yn=mn.length?function(t){var e=t.url;!Ce.ct&&e&&i(mn,function(n){if(e.match(n))return Ce.ct=t.end+t.cbTime,!1})}:g,bn=[],Sn=0,xn={error:990,abort:905,timeout:903},_n="on"+fe,wn=function(){function t(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}var e=/(msie|trident)/i.test(Qt.userAgent),n=Xt.createElement("a"),r=t(Vt.href);return function(e){var n=t(e);return n.protocol===r.protocol&&n.host===r.host}}(),En=1e4,Tn=0;yt.prototype={add:function(t,e){this.len>this.limit||this.get(t)||(this.c[t]=e,this.len++)},get:function(t){return this.c[t]},reset:function(){this.c={},this.len=0}};var kn=new yt(100),Cn={};return St.prototype={increase:function(){this.count++},fix:function(){var t=this,e=t.stack;if(e&&Ct(e)){var n=[];i(e=e.split(/\n/),function(t,e){-1==t.indexOf("__ty_aysncWrap__")&&n.push(t)}),t.stack=n.join("\n")}},toObject:function(){var t=this;return{o:t.time,e:t.msg,l:t.lineno,c:t.colno,r:t.filename,ec:t.count,s:t.stack,m:t.module,ep:t.ep}}},function(){var t=Array.prototype;t.indexOf||(t.indexOf=function(t,e){var n=this.length>>>0;if((e|=0)<0)e=Math.max(n-e,0);else if(e>=n)return-1;if(void 0===t){do{if(e in this&&void 0===this[e])return e}while(++e!==n)}else do{if(this[e]===t)return e}while(++e!==n);return-1})}(),Ce.start()&&(function(){var t=y(function(){function t(t){return t?"1":"0"}var r=e.performance,o=!!r;o||L(v(Ne,["pf"]));var a=Q(pn),u=r&&r.timing,s=d($(u),a,xe),c=d({},Ye);Ce.fp?(c.fp=Ce.fp,o&&Ce.fp>Ce._le&&(L("fp>le"),c.fp=Z(r),c.__fp=2)):o?(c.fp=Z(r),c.__fp=1):c.fp=c.__fp=0,c.dr=at(u),o?c.fs=tt(r,u,c.fp,c):c.__fs=0;var f,l="";if(o){var h=Math.max(s.ls,0);h||(h=J()-u.navigationStart||n),c.trace=h;var p=ut(u);i(["fp","fs","dr","trace"],function(e){l+=t((p?c[e]-p:c[e])>=Jt[e+"_threshold"])}),delete c.trace,l.indexOf("1")>-1&&(f=K(r,u))}c.trflag=l||"0000",_e.pfStart=m(),delete s.firstScreenResources,delete s.resources,Ce.emit("send","/pf",d(s,c),f,function(){L("pf sent!"),Ce.xhrs=Ce.errs=null})});we.on(ae,function(){p(t)}).on([ue,se,ce],t)}(),function(){var t=Gt&&Gt.prototype;return t?(I(t,"open",st),I(t,"send",ct)):Gt&&(e.XMLHttpRequest=function(){var t=new Gt;return I(t,"open",st),I(t,"send",ct),t}),mt()}(),function(){var t=zt();return t?wt():Bt(e,oe,function(t){var n,r,i,o,a;(t instanceof e.Event||e.ErrorEvent&&t instanceof e.ErrorEvent)&&(n=t.message||t.error&&(t.error.message||t.error.constructor.name)||"",r=t.lineno||0,i=t.colno||0,(o=t.filename||t.error&&t.error.filename||t.target&&t.target.baseURI||"")==Xt.URL&&(o="#"),a=t.error),_t(n,o,r,i,a)}),we.on([ae,ue,se,ce],function(t){xt()}).on(ae,function(){t&&p(Et)}),setInterval(xt,En)}()),Ce._end=m(),R(function(){Se._end=Ce._end}),function(){if(Object.defineProperty){var t=e[ve];Object.defineProperty(e,ve,{get:function(){return Je++>0&&e.console&&console.warn("window.%s is deprecated, use window.%s instead.",ve,pe),t}})}}(),We}(0,window,+new Date);